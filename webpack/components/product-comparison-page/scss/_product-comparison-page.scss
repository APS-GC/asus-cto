@use "../../../site/scss/settings/mixins" as mix;
@use "../../../site/scss/settings/typography" as typo;
@use "../../../site/scss/settings/variables" as vars;

.product-comparison-page {
  @include mix.p(16, "y");

  .product-comparison-floating-card__container-wrapper {
    background-color: var(--color-primary);
    z-index: 10001;
    width: 100%;
    position: fixed;
    top: -100%;
    left: 0;
    visibility: hidden;
    transition:
      top 0.8s 0.2s ease,
      visibility 1s 0.2s ease;

    &.sticky {
      top: 0;
      visibility: visible;
    }

    .product-comparison-floating-card__container {
      overflow: auto;
      @include mix.p(5, "y");
    }
  }

  .product-comparison-component-wrapper {
    display: flex;
    flex-direction: column;
    @include mix.spacer("gap", 16);

    .header-component-wrapper {
      .header-container {
        position: relative;
        z-index: 9999999;
        @include typo.text-small();

        .internal-container {
          .back-button {
            cursor: pointer;
            @include typo.text-small();

            .icon--arrow-left {
              height: 12px;
              width: 5px;
              mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="5" height="12" viewBox="0 0 10 15" fill="none"><path d="M8.24189 1.13281L1.87793 7.49677L8.24189 13.8607" stroke="black" stroke-width="2.25" stroke-linecap="round" stroke-linejoin="round"/></svg>');
            }

            &:hover {
              color: var(--color-primary);
            }
          }

          .section-heading {
            display: none;
          }
        }

        .section-heading {
          @include mix.m(0, "b");

          .section-heading__title {
            color: var(--color-primary);
          }
        }

        .clear-all-action-container {
          display: flex;
          @include mix.spacer("gap", 4);

          .clear-all-button {
            color: var(--color-info);
            @include typo.text-small();

            &:hover {
              color: var(--color-focus-ring);
            }
          }
        }
      }
    }

    .scrollable-component {
      width: 100%;
      display: flex;
      flex-direction: column;
      overflow-x: visible;
      @include mix.spacer("gap", 16);

      .product-comparison-card__container {
        overflow-x: auto;
        align-items: stretch;
        &::-webkit-scrollbar {
          display: none;
        }
      }

      .trailing-action-buttons-wrapper {
        &::-webkit-scrollbar {
          display: none;
        }
        overflow-x: scroll;
      }
      .product-comparison-table {
        .product-comparison-table-rows {
          &::-webkit-scrollbar {
            display: none;
          }
          @include mix.m(4, "t");
          overflow-x: scroll;
          @include mix.respond-to("xl", "max") {
            @include mix.m(10, "x");
          }
          @include mix.respond-to("md", "max") {
            @include mix.m(5, "x");
          }
        }
        .page-navigation {
          flex-direction: column;
          @include mix.spacer("gap", 2);
          position: fixed;
          top: 50%;
          right: 20px;
          transform: translateY(-50%);
          z-index: 100;
          transition:
            opacity 0.2s ease,
            visibility 0.2s ease;
          padding: 12px 0;
          opacity: 1;
          visibility: visible;

          &.hide {
            opacity: 0;
          }

          &:has(a:focus-visible) {
            opacity: 1;
          }

          &.hide-bullets {
            .navigation-bullet {
              opacity: 0;
              pointer-events: none;

              &:focus,
              &:focus-visible {
                opacity: 1;
                pointer-events: auto;
              }
            }
          }

          .navigation-bullet {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            padding: 0;
            text-decoration: none;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: visible;
            position: relative;

            &::before {
              content: "";
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              border: 1px solid var(--color-primary);
              width: 8px;
              height: 8px;
              border-radius: 100%;
              transition: all 0.3s ease;
            }

            .navigation-bullet-dot {
              display: none;
            }

            .navigation-bullet-label {
              display: none;
            }

            &:hover {
              &::before {
                background-color: var(--color-primary-100);
                border-width: 2px;
              }
            }

            &:focus,
            &:focus-visible {
              outline: none;

              &::after {
                content: "";
                position: absolute;
                top: -4px;
                left: -4px;
                right: -4px;
                bottom: -4px;
                border: 2px solid var(--color-focus-ring);
                border-radius: 0;
                pointer-events: none;
              }
            }

            &.selected {
              &::before {
                background-color: var(--color-primary);
              }
            }
          }
        }

        .page-navigation-hover-panel {
          position: fixed;
          top: 50%;
          right: 20px;
          transform: translateY(-50%);
          z-index: 9999999;
          background-color: var(--color-primary-950);
          border-radius: vars.$border-radius;
          box-shadow: -2px 0 8px rgba(0, 0, 0, 0.15);
          display: flex;
          flex-direction: column;
          transition:
            opacity 0.2s ease,
            visibility 0.2s ease;
          opacity: 1;
          visibility: visible;
          max-height: 80vh;
          overflow-y: auto;
          scrollbar-width: thin;
          scrollbar-color: var(--color-primary-400) transparent;
          @include mix.p(4, "y");
          width: 200px;

          &.hide {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
          }

          .navigation-hover-item {
            display: flex;
            align-items: center;
            text-decoration: none;
            transition: background-color 0.2s ease;
            border-left: 3px solid transparent;
            @include mix.p(2, "y");
            @include mix.p(5, "x");

            .navigation-hover-label {
              color: var(--color-primary-200);
              white-space: nowrap;
              @include typo.text-small();
            }

            &:hover {
              .navigation-hover-label {
                color: var(--color-primary-base);
                font-weight: 500;
              }
            }

            &:focus,
            &:focus-visible {
              outline: none;
              border: 2px solid var(--color-info);

              .navigation-hover-label {
                color: var(--color-primary-base);
              }
            }

            &.selected {
              background-color: var(--color-focus-ring);

              .navigation-hover-label {
                color: var(--color-primary-950);
              }
            }
          }
        }
      }

      .btn-sm {
        @include typo.text-small();
        line-height: 1.125rem;
        width: 100%;
        outline-offset: -2px;
      }

      .switch-container {
        display: flex;
        align-items: center;
        @include mix.spacer("gap", 2);
        margin-bottom: -64px;
        position: sticky;
        left: 0;
        @include mix.respond-to("xl", "max") {
          @include mix.p(10, "x");
        }
        @include mix.respond-to("md", "max") {
          @include mix.p(5, "x");
        }

        .info-tooltip-wrapper {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 24px;
          height: 24px;
        }
      }
    }
  }

  @include mix.respond-to("xl", "max") {
    padding-top: 0px;

    .product-comparison-floating-card__container-wrapper {
      &.sticky {
        top: 56px;
        z-index: 10;
      }

      .product-comparison-floating-card__container {
        @include mix.p(0, "t");
      }
    }

    .product-comparison-component-wrapper {
      @include mix.spacer("gap", 10);

      .header-component-wrapper {
        position: sticky;
        top: 0;
        z-index: 9999999;
        background-color: var(--color-primary);

        .header-container {
          @include mix.p(4, "y");
          background-color: var(--color-primary);

          .internal-container {
            @include mix.spacer("gap", 2);

            .back-button {
              color: var(--color-primary-950);

              .icon {
                height: 12px;
                width: 12px;
              }

              .back-button-text {
                display: none;
              }
            }

            .vertical-divider {
              width: 1px;
              height: 24px;
              background-color: #d9d9d9;
              opacity: 20%;
            }

            .section-heading {
              display: block;

              .section-heading__title {
                color: var(--color-primary-950);
                @include typo.text-display6();
              }
            }
          }

          .section-heading {
            display: none;
          }

          .clear-all-action-container {
            span {
              color: var(--color-primary-950);
            }

            .clear-all-button {
              color: var(--color-select-box-highlight);
            }
          }
        }
      }

      .scrollable-component {
        overflow-x: hidden;
        @include mix.spacer("gap", 10);
        .switch-container {
          margin-bottom: -40px;
        }
        .product-comparison-table {
          .page-navigation {
            display: none;
          }

          .page-navigation-hover-panel {
            display: none;
          }
        }

        &::-webkit-scrollbar {
          display: none;
        }

        /* Hide scrollbar for Firefox */
        scrollbar-width: none;

        /* Optional: Hide scrollbar for IE/Edge legacy */
        -ms-overflow-style: none;
      }
    }
  }

  @include mix.respond-to("md", "max") {
    .product-comparison-component-wrapper {
      @include mix.spacer("gap", 4);

      .scrollable-component {
        @include mix.spacer("gap", 4);
        .switch-container {
          margin-bottom: -16px;
        }
      }
    }
  }
}

.comparison-product-card-item {
  .icon--plus-white {
    width: 15px;
    height: 15px;
  }
}

.product-comparison-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);

  @include mix.spacer("gap", 8);

  @include mix.respond-to("xl", "max") {
    grid-template-columns: repeat(4, 304px);
    @include mix.spacer("gap", 2);
    @include mix.p(10, "x");
  }

  @include mix.respond-to("md", "max") {
    grid-template-columns: repeat(4, minmax(159px, 1fr));
    @include mix.p(5, "x");
  }

  @include mix.respond-to("sm", "max") {
    grid-template-columns: repeat(4, 156px);
  }
}
