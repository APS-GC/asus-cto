@use "../../../site/scss/settings/mixins" as mix;
@use "../../../site/scss/settings/typography" as typo;
@use "../../../site/scss/settings/variables" as vars;

.filter-bar {
  background-color: var(--color-primary-50);
  position: sticky;
  top: 0;
  z-index: 99;

  .filters-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    @include mix.p(4, "y");

    .filters {
      display: flex;
      align-items: center;
      margin: auto;
      @include mix.spacer("gap", 12);

      .selected-games {
        display: flex;
        align-items: center;
        @include mix.spacer("gap", 4);

        .selected-games-text {
          @include typo.text-small();
        }

        .collapsed-view {
          display: flex;
          @include mix.spacer("gap", 1);

          img {
            height: 59px;
            border-radius: vars.$border-radius-sm;
          }

          .extra-games {
            height: 59px;
            width: 44px;
            align-content: center;
            border: 1px dashed var(--color-primary-300);
            border-radius: vars.$border-radius-sm;
          }
        }

        .expanded-view {
          display: none;
        }
      }

      .vertical-divider {
        background-color: var(--color-primary-300);
        width: 1px;
        height: 24px;
      }

      .budget {
        .your-budget {
          display: flex;
          @include mix.spacer("gap", 4);

          span {
            font-weight: var(--medium);
            font-size: 20px;
          }
        }

        .budget-center {
          display: none;
        }

        .budget-actions {
          display: none;
        }
      }
    }
  }

  .filter-button {
    cursor: pointer;
    display: flex;
    align-items: center;
    @include mix.spacer("gap", 1);
    @include typo.text-small();

    .icon {
      width: 0.75rem;
      height: 0.75rem;
    }
  }

  &.open {
    @include mix.p(9, "t");
    @include mix.p(20, "b");

    .filters-container {
      align-items: flex-start;

      .filters {
        max-width: 925px;
        width: 100%;

        .selected-games {
          flex-direction: column;
          place-items: flex-start;

          .collapsed-view {
            display: none;
          }

          .expanded-view {
            display: grid;
            grid-template-columns: repeat(3, 120px);
            @include mix.spacer("gap", 3);

            .game-item .game-details-wrapper:last-child .game-info {
              display: none;
            }

            .game-item .game-details-wrapper .image-wrapper .checkmark-overlay {
              width: 25px;
              height: 25px;
            }
          }
        }

        .vertical-divider {
          height: 368px;
        }

        .budget {
          display: flex;
          flex-direction: column;
          align-self: flex-start;
          width: 100%;
          @include mix.spacer("gap", 12);

          .your-budget {
            display: flex;
            flex-direction: column;

            span {
              font-size: 30px;
            }
          }

          .budget-center {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            width: 100%;
            @include mix.spacer(gap, 3);
            align-items: center;

            .budget-value {
              border-radius: vars.$border-radius-sm;
              background-color: transparent;
              border: 1px solid var(--color-primary-700);
              color: var(--color-primary-950);
              @include mix.p(3);
            }

            .budget-range-wrapper {
              grid-column: 1 / -1;
              order: 2;
              position: relative;
              @include mix.m(3, "t");

              .range-labels {
                display: flex;
                justify-content: space-between;
                color: var(--color-primary-700);
                position: relative;
                @include typo.text-xsmall();
                @include mix.m(4, "t");
              }
            }
          }

          .budget-actions {
            display: flex;
            justify-content: flex-end;
            @include mix.spacer("gap", 4);

            .reset-button {
              display: inline-flex;
              align-items: center;
              background-color: var(--color-primary-100);
              color: var(--color-primary-950);
              border: none;
              cursor: pointer;

              background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20' fill='none'%3E%3Cpath d='M9.16667 17.0255C7.60361 16.8224 6.31007 16.1339 5.28604 14.9599C4.26201 13.7857 3.75 12.4101 3.75 10.8332C3.75 9.98598 3.91722 9.17431 4.25167 8.3982C4.58611 7.62195 5.05458 6.94001 5.65708 6.35237L6.54813 7.24341C6.03632 7.71036 5.65035 8.2523 5.39021 8.86924C5.13007 9.48619 5 10.1408 5 10.8332C5 12.0554 5.39021 13.1326 6.17063 14.0649C6.95104 14.997 7.94972 15.5672 9.16667 15.7755V17.0255ZM10.8333 17.0415V15.7915C12.0364 15.5479 13.0316 14.9649 13.819 14.0424C14.6063 13.1199 15 12.0501 15 10.8332C15 9.44431 14.5139 8.26376 13.5417 7.29154C12.5694 6.31931 11.3889 5.8332 10 5.8332H9.70521L10.8302 6.9582L9.95188 7.83633L7.32375 5.2082L9.95188 2.58008L10.8302 3.4582L9.70521 4.5832H10C11.7436 4.5832 13.2212 5.18897 14.4327 6.40049C15.6442 7.61202 16.25 9.08959 16.25 10.8332C16.25 12.4015 15.7367 13.7701 14.71 14.939C13.6832 16.1078 12.391 16.8086 10.8333 17.0415Z' fill='%23999999'/%3E%3C/svg%3E");
              background-repeat: no-repeat;
              background-position: right center;
              background-size: 20px;
              @include mix.p(6, "r");
              @include mix.p(2, "y");
              @include mix.p(4, "l");
              @include typo.text-cta();
            }

            button[type="submit"] {
              background-color: var(--color-primary-950);
              color: var(--color-primary-50);
              cursor: pointer;
              border: none;
              border-radius: vars.$border-radius-sm;

              @include mix.p(2, "y");
              @include mix.p(4, "x");
              @include typo.text-cta();
            }
          }
        }
      }
    }
  }

  @include mix.respond-to("lg", "max") {
    .filters-container {
      justify-content: center;

      .filters {
        display: none;
      }
    }

    &.open {
      position: absolute;
      top: 0;
      width: 100%;
      @include mix.p(0);

      .filters-container {
        flex-direction: column-reverse;
        @include mix.p(0, "y");
        @include mix.p(10, "x");

        .filters {
          display: flex;
          flex-direction: column;
          @include mix.p(0);
          @include mix.spacer("gap", 0);

          .selected-games {
            flex-direction: row;
            justify-content: space-between;
            width: 100%;
            border-top: 1px solid var(--color-primary-300);
            border-bottom: 1px solid var(--color-primary-300);
            @include mix.p(4, "y");

            .expanded-view {
              grid-template-columns: repeat(6, 56px);
              @include mix.spacer("gap", 1);

              .game-item .game-details-wrapper .image-wrapper .checkmark-overlay {
                width: 15px;
                height: 15px;
              }
            }
          }

          .vertical-divider {
            display: none;
          }

          .budget {
            @include mix.spacer("gap", 2);
            @include mix.p(4, "y");

            .your-budget {
              div {
                display: none;
              }
            }

            .budget-actions {
              margin-top: 8px;
            }
          }
        }

        .filter-button {
          @include mix.p(4, "y");
          align-self: center;
        }
      }
    }
  }

  @include mix.respond-to("md", "max") {
    &.open {
      .filters-container {
        @include mix.p(0, "y");
        @include mix.p(5, "x");

        .filters {
          .selected-games {
            flex-direction: column;

            .expanded-view {
              grid-template-columns: repeat(6, 50px);
              justify-content: space-between;
              width: 100%;
            }
          }
        }
      }
    }
  }
}