@use "../../../../site/scss/settings/typography" as typo;
@use "../../../../site/scss/settings/variables" as vars;
@use "../../../../site/scss/settings/mixins" as mix;

.cmp-bundles-bonuses {
  .m-bottom {
    @include mix.m(16, "b");
  }
  .cmp-bundles__component {
    &-list {
      display: grid;
      grid-template-columns: 1fr 1fr;
      @include mix.spacer(gap, 2);
      @include mix.m(6, "t");
    }
  }
  .cmp-bonus-section {
    .cmp__bonus {
      &-disclaimer {
        @include mix.m(6, "b");
        @include mix.m(3, "t");
      }
      &-warning {
        color: var(--color-warning);
        @include mix.m(3, "b");
        @include mix.m(3, "t");
      }
      &-instructions {
        @include mix.m(6, "b");
        color: #e75b4b;
        background-color: #3f0903;
        border-radius: 8px;
        @include mix.p(4, "x");
        @include mix.m(2, "t");
        @include mix.p(3, "y");

        .icon {
          color: #e75b4b;
          @include mix.m(2, "r");
          vertical-align: middle;
        }
      }
      &-selected {
        @include mix.m(6, "b");
        display: flex;
        align-items: center;
        gap: 8px;

        .icon--checkmark {
          color: var(--color-success, #28a745);
          font-size: 16px;
          flex-shrink: 0;
        }
      }
    }
  }
  // Bonus container visibility states
  .cmp-bonus-container {
    transition:
      opacity 0.3s ease-in-out,
      transform 0.3s ease-in-out;

    &[data-bonus-visibility="visible"] {
      opacity: 1;
      transform: translateY(0);
    }

    &[data-bonus-visibility="hidden"] {
      opacity: 0;
      transform: translateY(-10px);
      pointer-events: none;
    }

    // Ensure hidden attribute takes precedence
    &[hidden] {
      display: none !important;
    }
  }
  .cmp-no-bundles-bonus {
    min-height: 250px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: center;
    transition:
      opacity 0.3s ease-in-out,
      transform 0.3s ease-in-out;

    &[data-no-content-visibility="visible"] {
      opacity: 1;
      transform: translateY(0);
    }

    &[data-no-content-visibility="hidden"] {
      opacity: 0;
      transform: translateY(-10px);
      pointer-events: none;
    }

    // Ensure hidden attribute takes precedence
    &[hidden] {
      display: none !important;
    }

    p {
      @include typo.text-cta;
      color: var(--color-primary-700);
    }
  }

  // Content wrapper states
  .cmp-bundles-wrapper,
  .cmp-bonuses-wrapper {
    transition: opacity 0.3s ease-in-out;

    &[hidden] {
      display: none !important;
    }
  }

  // Main container states
  .cmp-bundles-bonuses {
    &[data-has-bundles="false"][data-has-bonuses="false"] {
      .cmp-bundles-wrapper,
      .cmp-bonuses-wrapper {
        display: none;
      }

      .cmp-no-bundles-bonus {
        display: flex;
      }
    }
  }

  // Screen reader only utility class
  .sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }
}

@include mix.respond-to("md", "max") {
  .cmp-bundles-bonuses {
    .cmp-bundles__component {
      &-list {
        grid-template-columns: 1fr;
      }
    }
    .cmp-bonus-section {
      .cmp__bonus {
        &-disclaimer {
          @include typo.text-small;
        }
        &-warning {
          @include typo.text-base;
        }
        &-instructions {
          @include typo.text-base;
        }
        &-selected {
          @include typo.text-small;
        }
      }
    }
  }
}
