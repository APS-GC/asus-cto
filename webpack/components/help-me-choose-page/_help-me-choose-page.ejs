<%
  // Static games array
  const games = [
    { id: "cod", name: "Call of Duty: Modern Warfare", image: "./clientlib-site/images/games/call-of-duty.webp" },
    { id: "alanwake", name: "Alan Wake 2", image: "./clientlib-site/images/games/alan-wake.webp" },
    { id: "cs2", name: "Counter Strike 2", image: "./clientlib-site/images/games/counter-strike.webp" },
    { id: "baldur", name: "Baldur's Gate 3", image: "./clientlib-site/images/games/baldurs-gate.webp" },
    { id: "civ6", name: "Fortnite", image: "./clientlib-site/images/games/fortnite.webp" },
    { id: "fortnite", name: "Red Redemption 2", image: "./clientlib-site/images/games/red-redemption.webp" }
  ];
%>


<div class="help-me-choose-container container">
    <div class="text-container">
        <%- include('../section-heading/_section-heading.ejs', { name: 'Help me choose' }) %>
        <p class='text-para'>Tell us your preferred games, budget and chipset, and we will recommend desktops that best suit your needs.</p>
    </div>
    <div class="panelcontainer">
        <form id="game-selection-form" action="./product-matches.html" class="game-form" aria-label="Game selection form" data-select-game-form>
            <div class="layout-grid layout-grid--cols-6" aria-atomic="false" aria-live="polite">
                <% games.forEach(game=> { %>
                    <div class="layout-grid__col layout-grid__col--span-1 layout-grid__col--tab-span-3">
                        <div class="grid-item">
                            <%- include('../game-card/_game-card.ejs', { game }) %>
                        </div>
                    </div>
                <% }); %>
            </div>
            <div class="budget-bar" role="group" aria-label="Budget filters">
                <div class="budget-left">
                    <div id="budget-range-label">Your budget:</div>
                </div>
                <div class="budget-center">
                    <label for="budget-min-value" class="sr-only-fixed">Minimum Budget Value</label>
                    <input 
                        type="text" 
                        class="budget-value" 
                        id="budget-min-value" 
                        value="$1,100"
                    />
                    
                    <div class="budget-separator" aria-hidden="true">to</div>

                    <div id="maximum-budget-wrapper-mobile"></div>
                    
                    <div class="budget-range-wrapper">
                        <div id="budget-range" class="budget-range-slider" 
                            data-start="[1100, 5000]" data-min="500" data-max="5000" data-step="100">
                        </div>
                        <div class="range-labels" aria-hidden="true">
                            <span>$500</span>
                            <span>$5,000</span>
                        </div>
                    </div>
                    
                    <div id="maximum-budget-wrapper-desktop">
                        <label for="budget-max-value" class="sr-only-fixed">Maximum Budget Value</label>
                        <input 
                            type="text" 
                            class="budget-value" 
                            id="budget-max-value" 
                            value="$5,000"
                        />
                    </div>
                </div>

                <input type="hidden" name="min-budget" id="min-budget" value="" />
                <input type="hidden" name="max-budget" id="max-budget" value="" />

                <div class="budget-actions">
                    <button type="reset" class="reset-button btn btn-link">Reset</button>
                    <button type="submit" class="btn" disabled>Help me choose</button>
                </div>
            </div>
        </form>
    </div>
</div>